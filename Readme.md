# AirportsSearch

**AirportsSearch** — это приложение, реализующее поисковый движок на основе структуры данных Бор (Trie). Это решение предназначено для эффективного поиска информации по аэропортам с использованием памяти в оптимизированном виде. В частности, Бор обновляется порциями, что позволяет работать с большими объемами данных, не перегружая память.

## Описание

В приложении используется структура данных **Бор (Trie)** для выполнения поиска по строкам, что позволяет быстро находить все аэропорты, соответствующие заданному поисковому запросу. Бор представляет собой дерево, где каждый узел (или **нода**) хранит одну букву и список идентификаторов аэропортов, содержащих эту букву в определённой позиции строки.

Для оптимизации использования памяти Бор заполняется **порциями по 1000 строк**. Это позволяет избегать загрузки всех данных в память одновременно, что особенно важно при работе с большими объемами информации.

## Структура данных

Каждый узел **Бора** (или **Vertex**) представляет собой объект, содержащий:
- **Значение буквы** (символ) — это буква, которая является частью строки.
- **Список "детей"** — указатели на дочерние узлы, которые содержат возможные следующие буквы в строке.
- **Список идентификаторов аэропортов** — список айди аэропортов, для которых в строке искомого столбца содержится текущая буква.

## Принцип работы

1. **Заполнение Бора**: Для загрузки данных используется подход с порционной обработкой. Каждая порция данных содержит 1000 строк, которые последовательно обрабатываются и добавляются в структуру данных.

2. **Поиск по Бору**: При поиске по строкам (например, по названию аэропорта) происходит последовательный обход Бора. Поиск идет по буквам слова и приводит к списку айди аэропортов, которые содержат это слово в соответствующих позициях.

## Оценка сложности

### Время поиска

Пусть **s** — длина искомого слова.

- **Время поиска** по Бор-дереву зависит от длины искомого слова, а не от количества элементов в данных. Поскольку для каждой буквы слова выполняется переход к соответствующему дочернему узлу, время поиска — это **O(s)**, где **s** — длина строки (слова).

- Поиск каждого слова по Бору будет происходить за **O(s)** времени, где **s** — длина строки (или длина слова, которое мы ищем).

### Затраты памяти

- В худшем случае каждый узел Бора хранит один символ и указатель на все возможные дочерние узлы. Количество узлов зависит от числа уникальных префиксов в данных. Память для каждого узла можно оценить как **O(1)** для символа и указателей.

- Если для каждого слова в данных мы создаем узлы для каждого символа, то общая память для хранения Бора будет **O(m * s)**, где **m** — количество строк, а **s** — длина строки.

- Для оптимизации использования памяти Бор перезаполняется порциями по 1000 строк, что позволяет не загружать все данные одновременно и эффективно управлять памятью.

## Пример использования

```java
for (int i = 0; i < 8; i++) {
    trie = _airportRepository.loadAirportsInBatches(column, i);

    for (String word : searchWords) {
        searchStartTime = System.currentTimeMillis();
        List<Short> ids = trie.searchIds(word);
        searchTime = System.currentTimeMillis() - searchStartTime;

        if (searchResults.containsKey(word)) {
            sr = searchResults.get(word);
            searchResults.get(word).ids.addAll(ids);
        }
        else {
            sr = new SearchResult();
            sr.ids = ids;
            searchResults.put(word, sr);
        }
        sr.time += searchTime;
    }
}
```
## Назначение файлов проекта
- com.app.App — основной класс программы, который запускает приложение и координирует выполнение поисковых операций.
- com.utils.ArgumentParser — парсер входных аргументов, который обрабатывает командную строку и передает параметры в приложение.
- com.utils.InputFileReader — файл для чтения входных данных, который загружает информацию из источников данных для дальнейшей обработки.
- com.utils.JsonWriter — файл для записи итогового JSON, использующий библиотеку Gson для сериализации данных в удобный для чтения формат.

- Папка com.app.entities
В этой папке содержатся основные сущности проекта:

- Trie — структура данных Бор (Trie), предназначенная для хранения и поиска строковых данных.
- Vertex — узел Бора, который представляет собой букву и имеет указатели на дочерние узлы и список идентификаторов.
- SearchResult — объект, который хранит результаты поиска для конкретного слова, включая список айди найденных аэропортов и время поиска.

- Папка repositories
Содержит репозитории для работы с данными об аэропортах, которые отвечают за загрузку и преобразование информации об аэропортах в Бор.